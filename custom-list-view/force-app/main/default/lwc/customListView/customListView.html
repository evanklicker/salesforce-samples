<template>
    <div>
        <lightning-card title={datatableTitle}>
            <lightning-formatted-text class="slds-p-left_medium" value={selectedRowsText}></lightning-formatted-text>
            <lightning-input class="slds-p-around_small" label="" placeholder="Search records..." type="search" onchange={handleSearchTermChanged}></lightning-input>
            <div slot="actions">
                <lightning-button-menu alternative-text="List view settings" variant="border-filled" icon-name="utility:settings" onselect={handleMenuSelect}>
                    <lightning-menu-item value="selectFields" label="Select Fields to Display"></lightning-menu-item>
                </lightning-button-menu>
            </div>
            <div class="spinnerContainer" style="height: 300px">        
                <div if:true={isLoading}>
                    <lightning-spinner class="spinnerClass" alternative-text="Loading..."></lightning-spinner>
                </div>
                <lightning-datatable
                        key-field="Id"
                        data={displayedData}
                        onrowselection={handleRowSelection}
                        selected-rows={displayedSelectedRows}
                        show-row-number-column
                        draft-values={draftValues}
                        columns={displayedColumns}>
                </lightning-datatable>
            </div>
            <div slot="footer"> 
                <div>
                    <lightning-button-icon 
                        icon-name="utility:jump_to_left" 
                        onclick={handleFirstPageButtonClicked} 
                        alternative-text="First page" 
                        title="First page"
                        disabled={pageLeftDisabled}>
                    </lightning-button-icon>
                    <lightning-button-icon 
                        icon-name="utility:chevronleft" 
                        onclick={handlePreviousPageButtonClicked} 
                        alternative-text="Page left" 
                        title="Page left" 
                        disabled={pageLeftDisabled}
                        class="slds-m-left_xx-small">
                    </lightning-button-icon>
                    <lightning-button-icon 
                        icon-name="utility:chevronright" 
                        onclick={handleNextPageButtonClicked} 
                        alternative-text="Page right" 
                        title="Page right" 
                        disabled={pageRightDisabled}
                        class="slds-m-left_xx-small">
                    </lightning-button-icon>
                    <lightning-button-icon 
                        icon-name="utility:jump_to_right" 
                        onclick={handleLastPageButtonClicked} 
                        alternative-text="Last page" 
                        title="Last page" 
                        disabled={pageRightDisabled}
                        class="slds-m-left_xx-small">
                    </lightning-button-icon>
                </div>
                <br>
                <lightning-formatted-text value={pageText}></lightning-formatted-text>
            </div>
        </lightning-card>
    </div>
</template>